<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getDatabase, ref, push, onValue } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBSQAmMKvFjuANWhmZJAYHCwaIUTcwz6A8",
  authDomain: "jade-c8e32.firebaseapp.com",
  databaseURL: "https://jade-c8e32-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "jade-c8e32",
  storageBucket: "jade-c8e32.firebasestorage.app",
  messagingSenderId: "381125332620",
  appId: "1:381125332620:web:642dcf482b06fa3b9f35a9"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const queueRef = ref(db, "queue");

const input = document.querySelector("#nameInput");
const addBtn = document.querySelector("#addBtn");
const listDiv = document.querySelector("#list");

addBtn.addEventListener("click", () => {
  const name = input.value.trim();
  if (!name) return;

  push(queueRef, { name });
  input.value = "";
});

onValue(queueRef, (snapshot) => {
  listDiv.innerHTML = "";
  snapshot.forEach((child) => {
    const data = child.val();
    const p = document.createElement("p");
    p.textContent = data.name;
    listDiv.appendChild(p);
  });
});
</script>
